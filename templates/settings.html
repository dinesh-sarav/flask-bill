{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">Admin & Store Settings</h2>

<form method="POST" class="row g-4">
  <!-- Admin Section -->
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-header">
        <h5 class="mb-0">Admin Account</h5>
      </div>
      <div class="card-body">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <div class="mb-3">
          <label>Name</label>
          <input type="text" class="form-control" name="admin_name" value="{{ admin.username }}">
        </div>

        <div class="mb-3">
          <label>Email</label>
          <input type="email" class="form-control form-control-sm" name="admin_email" value="{{ admin.email }}" readonly>
        </div>

        <div class="mb-3">
          <label>Password</label>
          <input type="password" class="form-control form-control-sm" name="admin_password" value="******" readonly>
        </div>

        <a href="{{ url_for('forgot_password') }}" class="btn btn-sm btn-warning">Change Email or Password</a>
        <button type="submit" class="btn btn-sm btn-success mt-2 float-end">Save Admin Info</button>
      </div>
    </div>
  </div>

  <!-- Store Settings -->
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-header">
        <h5 class="mb-0">Store Settings</h5>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label>Store Name</label>
          <input type="text" name="store_name" class="form-control form-control-sm" value="{{ settings.store_name }}" required>
        </div>

        <div class="mb-3">
          <label>Store Address</label>
          <textarea name="store_address" class="form-control form-control-sm" required>{{ settings.store_address }}</textarea>
        </div>

        <div class="mb-3">
          <label>Phone</label>
          <input type="text" name="phone" class="form-control form-control-sm" value="{{ settings.phone }}">
        </div>

        <div class="mb-3">
          <label>GST Number</label>
          <input type="text" name="gst_number" class="form-control form-control-sm" value="{{ settings.gst_number }}">
        </div>

        <div class="mb-3">
          <label>Invoice Prefix</label>
          <input type="text" name="invoice_prefix" class="form-control form-control-sm" value="{{ settings.invoice_prefix }}">
        </div>

        <div class="mb-3">
          <label>Low Stock Threshold</label>
          <input type="number" name="low_stock_threshold" class="form-control form-control-sm" value="{{ settings.low_stock_threshold }}">
        </div>

        <div class="mb-3">
          <label>Currency Symbol</label>
          <input type="text" name="currency_symbol" class="form-control form-control-sm" value="{{ settings.currency_symbol }}">
        </div>

        <button type="submit" class="btn btn-sm btn-primary mt-2">Save Store Settings</button>
      </div>
    </div>
  </div>
</form>

{% endblock %}
